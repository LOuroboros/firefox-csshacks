/* Source file https://github.com/MrOtherGuy/firefox-csshacks/tree/master/chrome/autohide_bookmarks_and_main_toolbars.css made available under Mozilla Public License v. 2.0
See the above repository for updates as well as full license text. */

#navigator-toolbox{
  --uc-bm-padding: 4px; /* Vertical padding to be applied to bookmarks */
  --uc-bm-height: calc(20px + 2 * var(--uc-bm-padding)); /* Might need to adjust if the toolbar has other buttons */
  --uc-navbar-height: -40px; /* navbar is main toolbar. Use negative value */
  --uc-autohide-toolbar-delay: 60ms; /* The toolbar is hidden after 0.6s */
}

:root[uidensity="compact"] #navigator-toolbox{
  --uc-bm-padding: 1px;
  --uc-navbar-height: -34px;
}
:root[uidensity="touch"] #navigator-toolbox{ --uc-bm-padding: 6px }

:root[sessionrestored] #nav-bar,
:root[sessionrestored] #PersonalToolbar{
  background-image: linear-gradient(var(--toolbar-bgcolor),var(--toolbar-bgcolor)), var(--lwt-additional-images,var(--toolbar-bgimage))  !important;
  background-position: top,var(--lwt-background-alignment);
  background-position-y: calc(0px - var(--tab-min-height) - 2*var(--tab-block-margin,0px));
  background-repeat: repeat,var(--lwt-background-tiling);
  transform: rotateX(90deg);
  transform-origin: top;
  transition: transform 0ms linear var(--uc-autohide-toolbar-delay) !important;
  z-index: 2;
}

:root[sessionrestored] #PersonalToolbar{
  z-index: 1;
  background-position-y: calc(0px - var(--tab-min-height) - 2*var(--tab-block-margin,0px) + var( --uc-navbar-height));
}

:root[lwtheme-image] #nav-bar,
:root[lwtheme-image] #PersonalToolbar{
  background-image: linear-gradient(var(--toolbar-bgcolor),var(--toolbar-bgcolor)),var(--lwt-header-image), var(--lwt-additional-images,var(--toolbar-bgimage)) !important;
}

#nav-bar[customizing],#PersonalToolbar[customizing]{ transform: none !important }

#navigator-toolbox > #PersonalToolbar{
  transform-origin: 0px var(--uc-navbar-height);
  position: relative;
}

:root[sessionrestored]:not([customizing]) #navigator-toolbox{
  margin-bottom:  calc(0px - var(--uc-bm-height) + var(--uc-navbar-height));
}
#PlacesToolbarItems > .bookmark-item {
  min-height: calc(var(--uc-bm-height) - 4px); /* Bookmarks have 2px block margin */
  padding-block: 0px !important;
}

#OtherBookmarks,
#PlacesChevron,
#PersonalToolbar > #import-button{
  padding-block: var(--uc-bm-padding) !important;
}

/* Make sure the bookmarks toolbar is never collapsed even if it is disabled */
:root[sizemode="fullscreen"] #PersonalToolbar,
#PersonalToolbar[collapsed="true"]{
  min-height: initial !important;
  max-height: initial !important;
  visibility: hidden !important
}

:root[sizemode="fullscreen"] #PersonalToolbar .bookmark-item{ visibility: hidden !important; }

/* The invisible toolbox will overlap sidebar so we'll work around that here */
#navigator-toolbox{ pointer-events: none; border-bottom: none !important; }
#PersonalToolbar{ border-bottom: 1px solid var(--chrome-content-separator-color) }
#navigator-toolbox > *{ pointer-events: auto }

#sidebar-box{ position: relative }

/* Selected tab needs higher z-index now to "hide" the broder below it */
.tabbrowser-tab[selected]{ z-index: 3 !important; }

/* SELECT TOOLBAR BEHAVIOR */
/* Comment out or delete one of these to disable that behavior */

/* Show when urlbar is focused */
#nav-bar:focus-within + #PersonalToolbar,
#navigator-toolbox > #nav-bar:focus-within{
  transition-delay: 0ms !important;
  transform: rotateX(0);
}

/* Show when cursor is over the toolbar area */
#navigator-toolbox:hover > .browser-toolbar{
  transition-delay: 0ms !important;
  transform: rotateX(0);
}
/* This makes the tab notification box show immediately below tabs, otherwise it would break the layout */
:where(#titlebar,#tab-notification-deck){
  -moz-box-ordinal-group: 0;
}
/* Show when cursor is over popups/context-menus - cannot control which ones */
/*
#mainPopupSet:hover ~ box > toolbox > .browser-toolbar{
  transition-delay: 100ms !important;
  transform: rotateX(0);
}
*/

/* Uncomment the next part to enable compatibility for multi-row_bookmarks.css
 * This would break buttons placed in the toolbar,
 * but that is likely not happening if you are using multi-row setup
 */
 
/*
#navigator-toolbox{ margin-bottom: var(--uc-navbar-height) !important; }
#PersonalToolbar:not([customizing]){
  position: fixed !important;
  display: block;
  margin-bottom: 0px !important;
}
*/

/* ------------------------------------------------------------------------------------------ */

/* LEGIBLE TOOLTIP ON BOTTOM LEFT CORNER WHEN HOVERING OVER LINKS */
/* http://forums.mozillazine.org/viewtopic.php?p=14839654#p14839654 */
/* https://web.archive.org/web/20201027235249/http://forums.mozillazine.org/viewtopic.php?p=14839654 */
#statuspanel-label {
  border: none !important;
  background: #000000 !important;
  color: #FFFFFF !important;
  font-family: Consolas, monospace !important;
}

/* ------------------------------------------------------------------------------------------ */

/* MAX TABS WIDTH */
/* http://forums.mozillazine.org/viewtopic.php?p=14839654#p14839654 */
/* https://web.archive.org/web/20201027235249/http://forums.mozillazine.org/viewtopic.php?p=14839654 */
.tabbrowser-tab:not([pinned])
{
  max-width: 200px !important;
  min-width: 140px !important;
}

/* ------------------------------------------------------------------------------------------ */

/* TABS: height */
/* https://support.cdn.mozilla.net/de/questions/1276915#answer-1279712 */
:root {
  --tab-toolbar-navbar-overlap: 0px !important;
  --tab-min-height: 24px !important; /* adjust to suit your needs */
}

:root #tabbrowser-tabs {
  --tab-min-height: 24px !important; /* needs to be the same as above under :root */
}

#TabsToolbar {
  height: var(--tab-min-height) !important;
}

#tabbrowser-tabs,
#tabbrowser-tabs > .tabbrowser-arrowscrollbox,
.tabbrowser-tabs[positionpinnedtabs] > .tabbrowser-tab[pinned] {
  min-height: var(--tab-min-height) !important;
  max-height: var(--tab-min-height) !important;
}

/* ------------------------------------------------------------------------------------------ */

/* Hide the Minimize/Maximize/Close buttons */
/* https://www.reddit.com/r/FirefoxCSS/comments/amby9d */

.titlebar-buttonbox-container{ display: none !important }

#toolbar-menubar spacer {
  display: none !important;
}

/* ------------------------------------------------------------------------------------------ */

/* https://www.reddit.com/r/FirefoxCSS/comments/m6txt7/how_do_i_delet_that_space_and_change_background/gr7sytl/ */

.titlebar-spacer[type="pre-tabs"]{display:none;}
.titlebar-spacer[type="post-tabs"]{display:none;}

/* ------------------------------------------------------------------------------------------ */

/* https://www.reddit.com/r/firefox/comments/npxfsy/how_to_bring_square_tabs_back/h07m1rt/.compact */

.tab-background {
    border-radius: 0px !important;
    margin-block: 1px 0 !important;
}

/* ------------------------------------------------------------------------------------------ */

/* https://github.com/leadweedy/Firefox-Proton-Square/blob/main/userChrome.css */

/* USER FACING VARIABLES -------------------------------------------------------------------------------------- */
/* this file does NOT have to be updated between versions */
:root {
/* sets the height of the tabs toolbar */
  --tab-bar-height: 33px;
} 

/* TITLE BAR ----------------------------------------------------------------------------------------------- */

/* override mozilla min/max/close buttons with default ones (only relevant on linux) */
@media (-moz-gtk-csd-available) {
  @supports -moz-bool-pref("browser.windowcontrolbuttons.overwrite") {
    .titlebar-button:-moz-lwtheme {
      appearance: auto !important;
    }
    .titlebar-min:-moz-lwtheme, .titlebar-max:-moz-lwtheme, .titlebar-restore:-moz-lwtheme, .titlebar-close:-moz-lwtheme {
      list-style-image: none !important;
    }
    .titlebar-button:-moz-lwtheme:hover, .titlebar-button:-moz-lwtheme:hover:active {
    background-color: unset !important;
    color: unset !important;
    }
  }
}


/* remove window corner rounding in gtk */
:root[tabsintitlebar][sizemode="normal"]:not([gtktiledwindow="true"]) #navigator-toolbox:-moz-lwtheme,
:root[tabsintitlebar][sizemode="normal"]:not([gtktiledwindow="true"]) ::backdrop {
  border-top-left-radius: 0 !important;
  border-top-right-radius: 0 !important;
}


/* TAB BAR ------------------------------------------------------------------------------------------------- */

/* sets the height of the tab toolbar
otherwise will change height when tabs overflow */
#TabsToolbar {height: var(--tab-bar-height) !important;}
:root{
  --tab-min-height: var(--tab-bar-height) !important;
}


/* Reduce left spacer on tab bar */
.titlebar-spacer[type="pre-tabs"] {
  display: none !important;
}


/* Tab - Connect to window */
.tab-background {
  border-radius: 0 !important;
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.tab-content {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}
.tab-stack {
  margin-top: 0 !important;
  margin-bottom: 0 !important;
}


/* adds the little colored strip on top of the selected tab */
.tab-background:is([selected],[multiselected]) {
  box-shadow: inset 0 2px var(--custom-accent-color) !important;
  border: 0 !important;
}


/* make context line (from container tabs) visible */
.tabbrowser-tab[selected] .tab-context-line {
  margin-top: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  border-radius: 0 !important;
}


/* realign the selected tab so it doesnt droop down by 2px */
.tabbrowser-tab[visuallyselected="true"]{
  z-index: 0 !important;
}


/* neighbouring tabs should "pinch" together */
.tabbrowser-tab {padding-inline: 0 !important;}


/* Unselected Tab - Divide line */
.tab-content::before,
.tab-content::after {
  content: "" !important;
  display: block !important;
  position: absolute !important;
  background-color: #535354 !important;
  width: 1px !important;
  height: 40px !important;
  transform: translateY(-20px) !important;
  opacity: 0 !important;
  transition: opacity 1s var(--ease-basic) !important;
}
.tab-content::before {left: 0 !important;}
.tab-content::after {right: 0 !important;}

.tabbrowser-tab[visuallyselected][style*=transform] + .tabbrowser-tab[style*=transform] .tab-content::after,
.tabbrowser-tab[style*=transform]:not([visuallyselected]) .tab-content::before,
.tabbrowser-tab[style*=transform] + .tabbrowser-tab:not([visuallyselected]) .tab-content::before,
.tabbrowser-tab:not([visuallyselected]):not(:hover):not([multiselected]) + .tabbrowser-tab:not([visuallyselected]):not(:hover):not([multiselected]) .tab-content::before,
#tabbrowser-tabs[hasadjacentnewtabbutton]:not([overflow]) .tabbrowser-tab[last-visible-tab]:not([visuallyselected]):not(:hover):not([multiselected]) .tab-content::after {
  opacity: var(--tab-separator-opacity) !important;
}


/* squares the mute button on hover */
.tab-icon-overlay:not([pinned], [sharing], [crashed]):is([soundplaying], [muted], [activemedia-blocked]) {
  border-radius: 0 !important;
}


/* NAV BAR ---------------------------------------------------------------------------------------------------- */

:root{
  /* reduce padding between menu items */
  --arrowpanel-menuitem-padding: 3px 4px !important;
  --arrowpanel-menuitem-margin: 0 2px !important;
  --panel-subview-body-padding: 2px 0 !important;


  /* square the off most of the UI (selection buttons on hover, context menus, hamburger menus, etc) */
  --toolbarbutton-border-radius: 0 !important;
  --arrowpanel-menuitem-border-radius: 0 !important;
  --arrowpanel-border-radius: 0 !important;
  --tab-border-radius: 0 !important;
  --subviewbutton-border-radius: 0 !important;
}


/* squares the profile picture on toolbar if logged into sync AND not disabled by pref */
@supports not -moz-bool-pref("browser.syncavatar.round") {
  #fxa-avatar-image {border-radius: 0 !important;}
}

/* SUB MENUS --------------------------------------------------------------------------------------------- */

/* removes the rounded corners from (bookmarks) menu */
.menupopup-arrowscrollbox, .panel-arrowcontainer, .panel-arrowbox, .panel-arrowscrollbox, menupopup {
  border-radius: 0 !important;
}


/* removes rounded corner from selection box in side bookmarks menu */
menupopup menuitem, menupopup menu {border-radius: 0 !important;}


/* square input fields in the edit bookmarks menu */
#editBMPanel_namePicker {border-radius: 0 !important;}
#editBMPanel_folderMenuList {border-radius: 0 !important;}
#editBMPanel_tagsField {border-radius: 0 !important;}
#editBMPanel_locationField {border-radius: 0 !important;}
#editBMPanel_keywordField {border-radius: 0 !important;}


/* square off aspects of the download menu (i.e. selection boxes, open in folder button) */
.download-state, .downloadButton {border-radius: 0 !important;}

.downloadProgress {
  border-radius: 0 !important;
  overflow: hidden !important;
}

.downloadProgress[paused] {
  border-radius: 0 !important;
}

.downloadProgress:not([value="0"])::-moz-progress-bar {
  border-radius: 0 !important;
}

.downloadProgress::-moz-progress-bar {
  border-radius: 0 !important;
}

.downloadProgress[paused]::-moz-progress-bar {
  border-radius: 0 !important;
}


/* square off the toggle switch for "enhanced tracking protection" */
.protections-popup-tp-switch, .protections-popup-tp-switch::before {border-radius: 0 !important;}


/* square the permissions popup (e.g. autoplay blocked) */
#permission-popup-menulist {border-radius: 0 !important;}


/* square permission popups for webRTC (screen sharing and voice) */
#webRTC-selectMicrophone-menulist {border-radius: 0 !important;}
#webRTC-selectWindow-menulist {border-radius: 0 !important;}
#webRTC-previewVideo {border-radius: 0 !important;}


/* square the fullscreen and zoom reset */
#appMenu-zoomReset-button2 > .toolbarbutton-text,
#appMenu-fullscreen-button2 > .toolbarbutton-icon {
  border-radius: 0 !important;
}


/* MISC ITEMS ------------------------------------------------------------------------------------------- */

/* square "close tabs and quit" window and buttons (and prob other dialog boxes) */
.dialogBox {border-radius: 0 !important;}
button {border-radius: 0 !important;}


/* square checkboxes */
.checkbox-check {border-radius: 0 !important;}
#checkbox {border-radius: 0 !important;}


/* square dropdown selection boxes */
select {border-radius: 0 !important;}


/* square selections, checkboxes, and nav buttons on the print page */
.toggle-group-label {border-radius: 0 !important;} 
.photon-number {border-radius: 0 !important;}
#headers-footers-enabled {border-radius: 0 !important;}
#backgrounds-enabled {border-radius: 0 !important;}
.toolbarButton:not(:hover) {background-color: #2b2a33 !important;}
#custom-range {border-radius: 0 !important;}


/* tooltips */
/* disabled for now, not all tooltips can be changed with css */
/* see https://old.reddit.com/r/FirefoxCSS/comments/dwpykf/problems_with_styling_tooltips/f80dnv8/ */
/* #tabbrowser-tab-tooltip,
#btTooltip,
#un-toolbar-tooltip,
#tooltip,
.tooltip,
#aHTMLTooltip,
#urlTooltip,
#bhTooltip,
.places-tooltip-box,
.tooltip-label,
tooltip {
	-moz-appearance: none !important;
	border-radius: 0 !important;
} */


/* autosave password notification input fields */
#password-notification-username {border-radius: 0 !important;}
#password-notification-password {border-radius: 0 !important;}


/* searchbox and buttons in find bar (ctrl+F) */
.findbar-textbox {border-radius: 0 !important;}
toolbarbutton {border-radius: 0 !important;}


/* certain new folder and login field popup dialogs */
#loginTextbox {border-radius: 0 !important;}
#password1Textbox {border-radius: 0 !important;}


/* density options in "Customize Toolbar" */
#customization-uidensity-menuitem-compact {border-radius: 0 !important;}
#customization-uidensity-menuitem-normal {border-radius: 0 !important;}
#customization-uidensity-menuitem-touch {border-radius: 0 !important;}


/* square popup when entering full screen video */
#fullscreen-warning {border-radius: 0 !important;}


/* square dismissable "show me how" notification messages */
notification-message {border-radius: 0 !important;}
.animated {border-radius: 0 !important;}
.infobar {border-radius: 0 !important;}
.infobar::before {
  border-start-start-radius: 0 !important;
  border-end-start-radius: 0 !important;
}


/* clear history popup and warnings */
#sanitizeDurationChoice {border-radius: 0 !important;}
#sanitizeEverythingWarningBox {border-radius: 0 !important;}


/* url preview on hover */
#statuspanel-label {border-radius: 0 !important;}


/* autofill pop up box */
slot {border-radius: 0 !important;}


/* TODO --------------------------------------------------------------------------------------------- */
/* +/- buttons for zoom in appmenu */
/* export buttons in about:certificates */
/* media (-moz-gtk-csd-available) {} for linux specific code */
/* https://www.reddit.com/r/FirefoxCSS/comments/o6q5i4/detect_each_os_lightdark_theme/ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */

/* ------------------------------------------------------------------------------------------ */

/* Insert new CSS code snippets here */

/* ------------------------------------------------------------------------------------------ */